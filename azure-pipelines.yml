trigger:
  - main                 # or your production branch

pr: none

pool:
  vmImage: ubuntu-latest

variables:
  SEDSTART_PROJECT_ID: '334'
  SEDSTART_TEST_ID:    '2093'
  SEDSTART_PROFILE_ID: '406'

steps:
  - task: Bash@3
    displayName: 'Trigger SedStart Production Test Run'
    inputs:
      targetType: 'inline'
      script: |
        echo "Triggering SedStart production run..."

        curl -f -X POST "https://api.sedstart.com/v1/projects/334/tests/2093/runs" \
          -H "Authorization: Bearer $(SEDSTART_API_KEY_PROD)" \
          -H "Content-Type: application/json" \
          -d '{
                "profile_id": "406",
                "wait": true
              }' && echo "SedStart run completed successfully!" || (
                echo "##[error]SedStart API call failed"
                exit 1
              )
    env:
      SEDSTART_API_KEY_PROD: $(SEDSTART_API_KEY_PROD)