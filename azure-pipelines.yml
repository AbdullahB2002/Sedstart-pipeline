trigger:
  - main

pr: none

pool:
  vmImage: ubuntu-latest

steps:
  - task: Bash@3
    displayName: 'Trigger SedStart Production Test Run'
    inputs:
      targetType: 'inline'
      script: |
        echo "Triggering SedStart production run..."

        curl -f -X POST "https://app.sedstart.com/api/v1/trigger" \
          -H "Authorization: Bearer $(SEDSTART_API_KEY_PROD)" \
          -H "Content-Type: application/json" \
          -d '{
                "project_id": "334",
                "test_id": "2093",
                "profile_id": "406",
                "wait": true
              }' && echo "SedStart run completed successfully!" || {
                echo "##[error]SedStart API call failed"
                exit 1
              }
    env:
      SEDSTART_API_KEY_PROD: $(SEDSTART_API_KEY_PROD)