trigger:
  - main

pr: none

pool:
  vmImage: ubuntu-latest

steps:
  - task: Bash@3
    displayName: 'Trigger SedStart Production Test Run'
    inputs:
      targetType: 'inline'
      script: |
        echo "Triggering SedStart prod tests..."
        curl -f -X POST "https://app.sedstart.com/api/run" \
          -H "Content-Type: application/json" \
          -H "x-api-key: $(SEDSTART_API_KEY)" \
          -d '{
                "project": "sample",
                "environment": "prod"
              }' && echo "SedStart tests completed successfully!" || {
                echo "##[error] SedStart API failed"
                exit 1
              }
    env:
      SEDSTART_API_KEY: $(SEDSTART_API_KEY)  # Your Azure secret (rename if needed)